<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YINKCID</title>
<style>
body { font-family: Arial; margin:0; padding:0; background:#f0f0f0; text-align:center; }
header { background:#ff4500; color:#fff; padding:12px; font-size:22px; font-weight:bold; }
.message { color:#ff4500; font-weight:bold; font-size:18px; margin:6px 0; }
.container { padding:12px; }
#auth-box, #upload-form { background:#fff; width:340px; margin:10px auto; padding:12px; border-radius:8px; box-shadow:0 0 6px #aaa; text-align:left; }
#auth-box input, #upload-form input { width:100%; padding:8px; margin:6px 0; box-sizing:border-box; }
#auth-actions { display:flex; gap:8px; justify-content:center; margin-top:6px; }
button { padding:8px 12px; cursor:pointer; border-radius:6px; border:1px solid #ccc; background:#fff; }
button.primary { background:#ff4500; color:#fff; border-color:#ff4500; }
.tabs { display:flex; justify-content:center; gap:8px; margin:10px 0; flex-wrap:wrap; }
.tab { padding:8px 16px; background:#fff; border-radius:6px; border:1px solid #ccc; cursor:pointer; }
.tab.active { background:#ff4500; color:#fff; font-weight:bold; border-color:#ff4500; }
.content { display:none; padding:10px; }
.content.active { display:block; }
.media-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; margin-top:10px; }
.card { background:#fff; padding:8px; border-radius:6px; box-shadow:0 0 5px #bbb; text-align:left; cursor:pointer; }
.card img, .card video { width:100%; border-radius:6px; display:block; }
.info { font-size:13px; margin-top:6px; }
.interactive { color:#ff4500; cursor:pointer; margin-right:8px; }
.comment-section { margin-top:6px; display:none; }
.comment-input { width:calc(100% - 80px); padding:6px; box-sizing:border-box; }
.comment-send { padding:6px 8px; margin-left:6px; }
.small { font-size:12px; color:#666; }
@media (max-width:800px){ .media-grid { grid-template-columns:repeat(2,1fr); } }
@media (max-width:420px){ .media-grid { grid-template-columns:repeat(1,1fr); } }
</style>
</head>
<body>
<header>Ch√†o m·ª´ng ƒë·∫øn v·ªõi YINKCID!</header>
<div class="message">C√°c b·∫°n h√£y ƒëƒÉng k√Ω k√™nh ƒë·ªÉ ·ªßng h·ªô k√™nh c·ªßa m√¨nh nh√©.</div>

<div class="container">

  <div id="auth-box">
    <h3>ƒêƒÉng nh·∫≠p / T·∫°o t√†i kho·∫£n</h3>
    <label>T√™n</label>
    <input id="input-name" type="text" placeholder="T√™n (b·∫Øt bu·ªôc)">
    <label>Email</label>
    <input id="input-email" type="email" placeholder="Email (b·∫Øt bu·ªôc)">
    <label>M·∫≠t kh·∫©u</label>
    <input id="input-password" type="password" placeholder="6 k√Ω t·ª±, ch·ªâ ch·ªØ/s·ªë">
    <div style="display:flex; align-items:center; gap:8px; margin-top:6px;">
      <input id="toggle-pass" type="checkbox"><label for="toggle-pass" class="small">Hi·ªán m·∫≠t kh·∫©u</label>
      <span class="small" style="margin-left:auto; color:#666">Ph√¢n bi·ªát hoa/th∆∞·ªùng</span>
    </div>
    <div id="auth-actions">
      <button id="btn-login" class="primary" onclick="handleLogin()">ƒêƒÉng nh·∫≠p</button>
      <button id="btn-register" onclick="handleRegister()">T·∫°o t√†i kho·∫£n</button>
    </div>
    <p class="small">M·∫≠t kh·∫©u ƒë√∫ng 6 k√Ω t·ª±, ch·ªâ g·ªìm ch·ªØ v√† s·ªë.</p>
  </div>

  <div id="upload-form">
    <h3>Upload / Th∆∞ vi·ªán (ch·ªâ ch·ªß s·ªü h·ªØu)</h3>
    <input id="file-input" type="file" accept="image/*,video/*">
    <div style="display:flex; gap:8px; margin-top:8px;">
      <button class="primary" onclick="uploadMedia()">Upload</button>
      <button onclick="openOwnerLibrary()">M·ªü th∆∞ vi·ªán c·ªßa t√¥i</button>
    </div>
    <p class="small">Sau khi upload, media s·∫Ω xu·∫•t hi·ªán trong tab Video ho·∫∑c ·∫¢nh. Hot Trend x√©t ti√™u ch√≠ (‚â§30 ng√†y & ƒëi·ªÉm hot).</p>
  </div>

  <div class="tabs" id="tabs-container">
    <div class="tab active" data-tab="hot" onclick="switchTab(event,'hot')">Hot Trend</div>
    <div class="tab" data-tab="video" onclick="switchTab(event,'video')">Video</div>
    <div class="tab" data-tab="image" onclick="switchTab(event,'image')">·∫¢nh</div>
  </div>

  <div id="hot" class="content active"><div id="hot-grid" class="media-grid"></div></div>
  <div id="video" class="content"><div id="video-grid" class="media-grid"></div></div>
  <div id="image" class="content"><div id="image-grid" class="media-grid"></div></div>

  <div id="owner-library" style="display:none; margin-top:10px;">
    <h3>Th∆∞ vi·ªán c·ªßa b·∫°n</h3>
    <div id="owner-grid" class="media-grid"></div>
    <div style="margin-top:8px;"><button onclick="closeOwnerLibrary()">ƒê√≥ng</button></div>
  </div>

</div>

<script>
// ===== C·∫•u h√¨nh & d·ªØ li·ªáu =====
let currentUser = null;
let mediaList = []; // {id, type:'video'|'image', url, date, likes, comments[], views}
const OWNER_INFO = {name:'YINKCID', email:'yinkcid@gmail.com', password:'213206'};
const USERS_KEY = 'yinkcid_users';
const OWNER_KEY = 'yinkcid_owner';

// ===== Helpers =====
function getUsers(){ return JSON.parse(localStorage.getItem(USERS_KEY)||'[]'); }
function saveUsers(users){ localStorage.setItem(USERS_KEY, JSON.stringify(users)); }
function getOwnerEmail(){ return localStorage.getItem(OWNER_KEY)||null; }
function setOwnerEmail(email){ localStorage.setItem(OWNER_KEY,email); }
function isValidPassword(pw){ return /^[a-zA-Z0-9]{6}$/.test(pw); }

document.getElementById('toggle-pass').addEventListener('change', ()=>{
  const inp=document.getElementById('input-password');
  inp.type = inp.type==='password'?'text':'password';
});

// ===== ƒêƒÉng k√Ω =====
function handleRegister(){
  const name=document.getElementById('input-name').value.trim();
  const email=document.getElementById('input-email').value.trim();
  const password=document.getElementById('input-password').value;
  if(!name||!email||!password){alert('ƒêi·ªÅn ƒë·ªß T√™n, Email, M·∫≠t kh·∫©u'); return;}
  if(!isValidPassword(password)){alert('M·∫≠t kh·∫©u kh√¥ng h·ª£p l·ªá'); return;}
  let users=getUsers();
  if(users.find(u=>u.email.toLowerCase()===email.toLowerCase())){alert('Email ƒë√£ t·ªìn t·∫°i'); return;}
  
  // Ki·ªÉm tra c√≥ ph·∫£i th√¥ng tin ch·ªß s·ªü h·ªØu
  let isOwner = (name===OWNER_INFO.name && email===OWNER_INFO.email && password===OWNER_INFO.password);
  if(isOwner && !getOwnerEmail()){ setOwnerEmail(email); alert('B·∫°n ƒë√£ ƒë∆∞·ª£c g√°n l√†m ch·ªß s·ªü h·ªØu c·ªßa trang!'); }

  users.push({name,email,password});
  saveUsers(users);
  alert('T·∫°o t√†i kho·∫£n th√†nh c√¥ng!'+(isOwner?' B·∫°n l√† ch·ªß s·ªü h·ªØu.':''));
}

// ===== ƒêƒÉng nh·∫≠p =====
function handleLogin(){
  const name=document.getElementById('input-name').value.trim();
  const email=document.getElementById('input-email').value.trim();
  const password=document.getElementById('input-password').value;
  let users=getUsers();
  let user=users.find(u=>u.email.toLowerCase()===email.toLowerCase() && u.password===password && u.name===name);
  if(!user){ alert('Th√¥ng tin ƒëƒÉng nh·∫≠p kh√¥ng ƒë√∫ng'); return; }
  currentUser=user;
  alert('ƒêƒÉng nh·∫≠p th√†nh c√¥ng!');
  if(email===OWNER_INFO.email && password===OWNER_INFO.password && name===OWNER_INFO.name){ 
    setOwnerEmail(email); 
    document.getElementById('upload-form').style.display='block';
  } else { document.getElementById('upload-form').style.display='none'; }
}

// ===== Tabs =====
function switchTab(e,tab){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
  e.target.classList.add('active'); document.getElementById(tab).classList.add('active');
}

// ===== Upload =====
function uploadMedia(){
  const file=document.getElementById('file-input').files[0];
  if(!file){ alert('Ch·ªçn file ƒë·ªÉ upload'); return;}
  const type = file.type.startsWith('video')?'video':'image';
  const url=URL.createObjectURL(file);
  const date=new Date().toISOString();
  const media={id:Date.now(), type,url,date,likes:0,comments:[],views:0};
  mediaList.push(media);
  renderMedia();
  alert('Upload th√†nh c√¥ng!');
}

// ===== Render Media =====
function renderMedia(){
  const videoGrid=document.getElementById('video-grid');
  const imageGrid=document.getElementById('image-grid');
  const hotGrid=document.getElementById('hot-grid');
  videoGrid.innerHTML=''; imageGrid.innerHTML=''; hotGrid.innerHTML='';

  let now=new Date();
  mediaList.forEach(m=>{
    const card=document.createElement('div'); card.className='card';
    let inner='';
    if(m.type==='image'){ inner=`<img src="${m.url}">`; }
    else{ inner=`<video src="${m.url}" controls></video>`; }
    inner+=`<div class="info">Ng√†y: ${new Date(m.date).toLocaleDateString()}<br>
      <span class="interactive" onclick="likeMedia(${m.id})">‚ù§ ${m.likes}</span>
      <span class="interactive" onclick="showComment(${m.id})">üí¨ ${m.comments.length}</span>
      <span>üëÅÔ∏è ${m.views}</span></div>
      <div class="comment-section" id="comment-${m.id}"></div>`;
    card.innerHTML=inner;
    card.onclick=()=>{ alert('B·∫°n c√≥ th·ªÉ xem / chuy·ªÉn gi·ªØa ch·ª´ng sang media kh√°c.'); m.views++; renderMedia();}
    if(m.type==='video') videoGrid.appendChild(card);
    else imageGrid.appendChild(card);
    // Hot Trend: ‚â§30 ng√†y
    const diff=(now-new Date(m.date))/(1000*60*60*24);
    if(diff<=30){ hotGrid.appendChild(card.cloneNode(true)); }
  });
}

// ===== Like & Comment =====
function likeMedia(id){ const m=mediaList.find(x=>x.id===id); m.likes++; renderMedia();}
function showComment(id){
  const m=mediaList.find(x=>x.id===id);
  const sec=document.getElementById('comment-'+id);
  sec.style.display=sec.style.display==='none'?'block':'none';
  sec.innerHTML=`<input class="comment-input" placeholder="Nh·∫≠p b√¨nh lu·∫≠n"><button class="comment-send" onclick="addComment(${id})">G·ª≠i</button>
    <div>${m.comments.map(c=>`<div>${c}</div>`).join('')}</div>`;
}
function addComment(id){
  const sec=document.getElementById('comment-'+id);
  const inp=sec.querySelector('.comment-input');
  if(inp.value.trim()!==''){
    const m=mediaList.find(x=>x.id===id); m.comments.push(inp.value.trim()); inp.value=''; showComment(id); 
  }
}

// ===== Th∆∞ vi·ªán owner =====
function openOwnerLibrary(){
  document.getElementById('owner-library').style.display='block';
  const grid=document.getElementById('owner-grid'); grid.innerHTML='';
  mediaList.forEach(m=>{
    const card=document.createElement('div'); card.className='card';
    card.innerHTML=m.type==='image'?`<img src="${m.url}">`:`<video src="${m.url}" controls></video>`;
    grid.appendChild(card);
  });
}
function closeOwnerLibrary(){ document.getElementById('owner-library').style.display='none'; }

</script>
</body>
</html>
